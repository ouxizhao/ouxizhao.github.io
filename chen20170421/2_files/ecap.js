String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var $AI=$AI||{version:"1.0",split:"***",uid:"",sid:"",eM:{type:1},hM:{type:2},lbM:{type:3,lid:"",lpid:"",lpn:""},gbM:{type:4,params:""},cM:{type:6},bP:(/https/.test(document.location.protocol)?"https":"http")+"://sum.cntvwb.cn/dc/collect/",cP:";path=/",isAllowEmpty:true,mouseX:0,mouseY:0,offX:0,offY:0};$AI.supportDel=(function(){try{eval("window['_$ai_a']=1;delete window['_$ai_a'];")}catch(e){return false}return true})();$AI.sendMsg=function(d,b){var a=new Image(),c="_img_"+new Date().getTime();window[c]=a;a.onload=a.onerror=function(){if($AI.supportDel){delete window[c]}else{window[c]=null}};a.src=d+"?ms="+encodeURIComponent(b)+$AI.split+"ltime="+new Date().getTime()};$AI.sendMsgOfSRC=function(c,b){var a=document.createElement("script");a.type="text/javascript";a.charset="UTF-8";a.src=c+"?ms="+encodeURIComponent(b);document.getElementsByTagName("HEAD")[0].appendChild(a)};$AI.callbackOfsendMsgOfSRC=function(a){var f=a.toString();var g=f.toString().split("_split_");var e="";var d="";for(var c=0;c<g.length;c++){if(g[c].indexOf("cuid=")>=0){d=g[c].split("=")[1]}else{if(g[c].indexOf("uid=")>=0){e=g[c].split("=")[1]}}}var b=document.createElement("input");b.setAttribute("id","ai_qm_result");b.setAttribute("AI_cuid",d);b.setAttribute("AI_uid",e);b.setAttribute("style","display:none");document.body.appendChild(b)};$AI.queryUtil=function(k,c,l){var m=k.trim();var n=arguments.length;var b=!c?document:(c.nodeType?c:document);switch(m.substr(0,1)){case"#":return document.getElementById(m.substr(1));case".":if(b.getElementsByClassName){return b.getElementsByClassName(m.substr(1))}else{if(b.all){var e=[];var f=b.all.length;for(var d=0;d<f;++d){if(n<3&&b.all[d].className.indexOf(m.substr(1))>-1){e.push(b.all[d])}else{if(n=3&&b.all[d].className==m.substr(1)){e.push(b.all[d])}}}return e}else{return" has no getElementsByClassName prop"}}case"$":if(document.getElementsByName){return document.getElementsByName(m.substr(1))}else{var h=new Array();var g=$AI.queryUtil(c);var a=m.substr(1);for(i in g){if(g[i].getAttribute("name")==a){h.push(g[i])}return h}}default:return b.getElementsByTagName(m)}};$AI.EventUtil={on:function(b,d,c){if(b.addEventListener){b.addEventListener(d,c,false)}else{if(b.attachEvent){b.attachEvent("on"+d,c)}else{if(b["on"+d]){b["on"+d]=c}else{if(b.length){for(var a=0;a<b.length;a++){$AI.EventUtil.on(b[a],d,c)}}}}}}};$AI.copyAtrr=function(d,b,a){var c=a.split("|");for(i=0,j=c.length;i<j;i++){if(d[c[i]]||d[c[i]]==""){b[c[i]]=d[c[i]]}}};$AI.sendCC=function(b){$AI.cM.cc=JSON.stringify(b);$AI.cM.sid=$AI.eM.sid;$AI.cM.uid=$AI.eM.uid;$AI.cM.url=$AI.eM.url;var a=f_ai_getMessage($AI.split,$AI.cM);$AI.sendMsg($AI.path_h1,a)};$AI.trackGD=function(d,e,f,a,g){if(arguments.length<4){if(window.console){window.console.error("input param number should be more than 4")}return}if(!$AI.isAllowEmpty){for(var b=0;b<arguments.length;b++){if(!arguments[b]){if(window.console){window.console.error("input param value must not be empty")}return}}}$AI.copyAtrr($AI.eM,$AI.gbM,"domain|uid|sid|uss|url|refdm|refpa|param|tt|ptform|tm|rs|cd|fv|ltime|cuid");$AI.gbM.category=d;$AI.gbM.action=e;$AI.gbM.optid=f;$AI.gbM.optvalue=a;$AI.gbM.params=!g?"":g;var c=f_ai_getMessage($AI.split,$AI.gbM);$AI.sendMsg($AI.path_en1,c)};$AI.trackLB=function(c,a,d){$AI.copyAtrr($AI.eM,$AI.lbM,"domain|uid|sid|uss|url|refdm|refpa|param|tt|ptform|tm|rs|cd|fv|ltime|cuid");$AI.lbM.lid=c;$AI.lbM.lpn=a;$AI.lbM.lpid=d;var b=f_ai_getMessage($AI.split,$AI.lbM);$AI.sendMsg($AI.path_en1,b)};function f_ai_start(){$AI.path_h1=$AI.path_en1=$AI.bP+"kf";var a=navigator,h=window,f=document;$AI.EventUtil.on(f,"mousemove",function(l){$AI.mouseX=l.pageX||(l.clientX+(f.body.scrollLeft||f.documentElement.scrollLeft));$AI.mouseY=l.pageY||(l.clientY+(f.body.scrollTop||f.documentElement.scrollTop));$AI.offX=l.screenX-$AI.mouseX;$AI.offY=l.screenY-$AI.mouseY});if(h.frames.length>0){var e=h.frames.length;for(var c=0;c<e;c++){try{$AI.EventUtil.on(h.frames[c]._d.body,"mousedown",function(l){$AI.mouseX=l.screenX-$AI.offX;$AI.mouseY=l.screenY-$AI.offY;f_ai_sendhM_ex($AI.mouseX,$AI.mouseY)})}catch(b){continue}}}var d=f.domain;var g="";if(3==d.split(".").length){g=d.substring(d.split(".")[0].length,d.length)}else{if(2==d.split(".").length){g=".".concat(d)}}$AI.cDomain=";domain=".concat(g);$AI.eM.domain=f.domain;$AI.eM.uid=f_ai_getC("userSeqId");$AI.eM.sid=f_ai_getC("sid");$AI.eM.cuid=f_ai_getUniqueName();$AI.eM.uss=f_ai_getC("uss");$AI.eM.url=f.URL;$AI.eM.refdm=f.referrer;$AI.eM.refpa=$AI.eM.refdm==null?"":(($_$a_=RegExp("//[^/]*(/.*)").exec($AI.eM.refdm))?$_$a_[1]:"");$AI.eM.param="";$AI.eM.tt=f.title;$AI.eM.ptform=a.platform;$AI.eM.tm=/Android|iPad|iOS|wm/i.test(detectOS())?"1":"0";$AI.eM.rs=(h.screen.width||0)+"x"+(h.screen.height||0);$AI.eM.cd=h.screen.colorDepth||0;f_ai_getFV();f_ai_sendeM();if(h.location.href.toString().indexOf("wenjuan.cntv.cn")>=0||h.location.href.toString().indexOf("itv.cctv.com")>=0){var k=f_ai_getMessage($AI.split,$AI.eM);$AI.sendMsgOfSRC($AI.bP+"evs",k)}$AI.EventUtil.on(f,"mousedown",function(m){var l=m.pageX||(m.clientX+(f.body.scrollLeft||f.documentElement.scrollLeft)||h.pageXOffset);var n=m.pageY||(m.clientY+(f.body.scrollTop||f.documentElement.scrollTop)||h.pageYOffset);f_ai_sendhM_ex(l,n)})}f_ai_start();function f_ai_sendhM_ex(a,b){if(a!=undefined&&b!=undefined){a=Math.floor(a-document.body.scrollWidth/2);b=Math.floor(b);$AI.hM.x=a;$AI.hM.y=b;$AI.hM.bodyX=document.body.scrollWidth;$AI.hM.bodyY=document.body.scrollHeight;f_ai_sendhM()}}function f_ai_getUniqueName(){var a=f_ai_getC("cuid");if(!a){var b=(new Date()).getTime();a=f_ai_newGuid()+"--"+b;f_ai_setC("cuid",a,true)}else{f_ai_setC("cuid",a,true)}return a}function f_ai_getSessionId(){var a=f_ai_getC("ECAPSID");if(a==0){a=f_ai_newGuid();f_ai_setC("ECAPSID",a,false);$AI.sid=a}else{$AI.sid=a}}function detectOS(){try{var o=navigator.userAgent,d=navigator.platform;var h=/^Win(32|64|dows)$/.test(d);var k=/^Mac(68K|PPC|intosh|Intel)$/.test(d);var l=/ipad/i.test(o);var m=/iphone os/i.test(o);var e=(d=="X11")&&!h&&!k;var c=d.indexOf("Linux")>-1;var a=/android/i.test(o);var b=/windows ce/i.test(o);var n=/windows mobile/i.test(o);if(k){return"Mac"}if(l){return"iPad"}if(m){return"iOS"}if(e){return"Unix"}if(c){if(a){return"Android"}else{return"Linux"}}if(b||n){return"wm"}if(h){var g=o.indexOf("Windows NT 5.0")>-1||o.indexOf("Windows 2000")>-1;if(g){return"Win2000"}if(o.indexOf("Windows NT 5.1")>-1||o.indexOf("Windows XP")>-1){return"WinXP"}if(o.indexOf("Windows NT 5.2")>-1||o.indexOf("Windows 2003")>-1){return"Win2003"}if(o.indexOf("Windows NT 6.0")>-1||o.indexOf("Windows Vista")>-1){return"WinVista"}if(o.indexOf("Windows NT 6.1")>-1||o.indexOf("Windows 7")>-1){return"Win7"}if(o.indexOf("Windows NT 6.2")>-1||o.indexOf("Windows 8")>-1){return"Win8"}if(o.indexOf("Windows NT 10.0")>-1){return"Win10"}else{return"Win"}}return"other"}catch(f){return"other"}}function f_ai_newGuid(){var a="";for(var b=1;b<=32;b++){var c=Math.floor(Math.random()*16).toString(16);a+=c;if((b==8)||(b==12)||(b==16)||(b==20)){a+="-"}}return a}function f_ai_getMessage(b,d){var c="";for(var a in d){if(typeof d[a]!=="function"){c+=a+"="+d[a]+b}}return c.substring(0,c.lastIndexOf(b))}function f_ai_sendhM(){$AI.copyAtrr($AI.eM,$AI.hM,"uss|uid|sid|refdm|refpa|domain|url|param|ptform|tm|tt|fv|rs|cd|cuid");var a=f_ai_getMessage($AI.split,$AI.hM);$AI.sendMsg($AI.path_h1,a)}function f_ai_sendeM(){var a=f_ai_getMessage($AI.split,$AI.eM);$AI.sendMsg($AI.path_en1,a)}function f_ai_sendsM(){$AI.sM.guid=$AI.eM.guid;$AI.sM.domain=$AI.eM.domain;$AI.sM.uniqueid=$AI.eM.uniqueid;$AI.sM.sessionid=$AI.eM.sessionid;$AI.sM.title=$AI.eM.title;var a=f_ai_getMessage($AI.split,$AI.sM);$AI.sendMsg($AI.path_en1,a)}function f_ai_dTime(){var b=new Date().getTime();var a=0;while(a<150){a=new Date().getTime()-b}}function f_ai_getPropById(d,c){try{var a=$AI.queryUtil("#"+c).value;$AI.eM[d]=!a?""+a:""}catch(b){$AI.eM[d]="";return}}function f_ai_setC(b,e,g){var c=2,f=new Date();f.setTime(f.getTime()+c*365*24*60*60*1000);var d=g?";expires="+f.toGMTString():"";var a=b+"="+escape(e);if(a.length<=4000){document.cookie=a+d+$AI.cDomain+$AI.cP}}function f_ai_getC(b){var a=($_$_a_=RegExp("(^| )"+b+"=([^;]*)(;|$)").exec(document.cookie))?$_$_a_[2]:"";return unescape(a)}function f_ai_getFV(){var g=0,d=navigator;if(window.ActiveXObject){var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(f){g=Number(f.GetVariable("$version").split(" ")[1].replace(/\,/g,".").replace(/^(\d+\.\d+).*$/,"$1"))}}else{if(d.plugins&&d.plugins.length>0){var f=d.plugins["Shockwave Flash"];if(f){var c=f.description.split(" ");for(var e=0,b=c.length;e<b;e++){var a=Number(c[e]);if(!isNaN(a)){g=a;break}}}}}$AI.eM.fv=g};

